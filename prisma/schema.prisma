generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
  relationMode = "prisma"
}

model coleccion {
  id                 Int       @id @default(autoincrement())
  nombre             String    @db.VarChar(30)
  favorito           Boolean   @db.Bit(1)
  duenio             usuario   @relation(fields: [duenio_id], references: [email])
  duenio_id          String     
  duenioPertenece    pertenece @relation(fields: [duenioPertenece_id], references: [id])
  duenioPertenece_id Int

  

  @@index([duenioPertenece_id])
  @@index([duenio_id])
}

model disenio {
  id                 Int      @id @default(autoincrement())
  duenio             usuario  @relation(fields: [duenio_id], references: [email])
  duenio_id          String  
  duenioPertenece    pertenece @relation(fields: [duenioPertenece_id], references: [id])
  duenioPertenece_id Int
  fecha              DateTime @default(now())
  imagen             Bytes    @db.MediumBlob
  mascara            Bytes    @db.MediumBlob
  coleccion          Int
  ambiente           String   @db.VarChar(20)
  presupuesto        Int
  estilo             String   @db.VarChar(20)
  link               link[]


  @@index([duenio_id])
  @@index([duenioPertenece_id])
}

model link {
  id         Int    @id @default(autoincrement())
  url        String @db.VarChar(2000)
  disenio    disenio   @relation(fields: [disenio_id], references: [id])
  disenio_id Int
  mueble     String @db.VarChar(30)


  @@index([disenio_id])
}

model usuario {
  email       String @id @unique
  contrasenia String @db.VarChar(30)
  idioma      Int?
  estilo      Int?
  font        Int?
  disenio     disenio[]
  coleccion   coleccion[]
  rol         tipo   @default(USER)

}

model pertenece {
  id        Int @id @default(autoincrement())
  coleccion coleccion[]
  disenio   disenio[]
}

enum tipo {
  USER
  ADMIN
}
